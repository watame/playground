# 状態管理
設定変更により、いろいろな値が切り替わる

# どういうことが考えられる？
- 画面内に状態を管理しないとダメな要素が多い
- 増え続ける決済パターン
- ユーザー操作で切り替わる画面
- ユーザー許諾のチェックボックス（医薬品）

# ReactNativeの利点
- Reactのライブラリをそのままインポートできる
  - React界隈ではさまざまな状態管理ライブラリがある

# どの状態管理ライブラリが良い？
シンプルな状態管理を目指す！

## Recoil
- Metaが開発している状態管理ライブラリ
- 簡単なコードでコンポーネント間で一貫した状態を保持できる
- なるべく小さなデータで状態管理することが推奨されている
  - `Atom`と呼ばれていることからも、そうやって使って欲しいことがわかる
- 状態をアプリ内どこからでも呼び出せる

各Atom間が相互に依存するなどの場合、かなり複雑になるので大変

## 状態管理を2つで分けて管理
## Server Cache
- サーバーの情報を保持するキャッシュ
- サーバーとクライアントの情報の一致が常に保証されている
- キャッシュの値がコンポーネントに影響する

ApolloClientのキャッシュ機能を利用
-> BFFのレスポンス情報自体をServerCacheとして保持する
## Local State
- クライアントでのユーザー操作による情報を保持する

useStateを利用
- 現在の値とそれを更新するための関数がペアで返却される

# まとめ
ServerCacheで管理することで、クライアントの操作によって変化するもののみに状態遷移を絞ることができる
