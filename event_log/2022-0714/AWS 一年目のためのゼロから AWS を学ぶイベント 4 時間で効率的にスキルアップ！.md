# みんなコンテナどんな風に使ってる？ 〜すぐに使えるコンテナレシピ〜
## メモ
### ダウンタイムの少ないシステムを実現する
ダウンタイム = プログラムが動いていない状態
- EKSで実現可能
    - ブルーグリーンデプロイメント
    - 古い環境を新しい環境に置き換えるリリース
    - 究極的には異常なコンテナは勝手に消えて、正常なコンテナが一定台数稼働するようになる

### 類似環境を作って検証
EKS Anyware がどこでも動く
-> オンプレ環境でもいける

### インフラ部分の管理工数を低減する
エンドユーザーが使いたいプログラムを動かしたいだけなのに、工数めっちゃかかる
-> コンテナが実行できる環境であれば、マネージドクラウドを使えば工数が削減できる
--> AWS Fargate を使えば、コンテナを動かす環境ごとマネージドで利用できる（工数削減できてハッピー）

### セキュリティリスクを軽減する
管理者アクセスってどう管理する？
-> 監査とかアクセスログを取りたい

いや、そもそもデプロイ環境には誰もログインできない方がええやろ
-> コンテナでアプリケーションの実行までを行えば対応できる
--> もちろんロギングの対応は必要となってくる

## 失敗事例
### 物理サーバーのように扱う
時が経つと、セキュリティパッチなどの対応が必要になる
-> コンテナ内でセキュリティアップデートする
--> そもそもコンテナ事態は大切に扱う必要はない、古いものは捨てよう

### オンプレのシステムをそのままコンテナ化する
まずはEC2インスタンスで同じ環境を構築してから、徐々に移行していくのが良いだろう
-> ICカードなどの特殊なデバイスを前提としたプログラムは厳しい

# サーバー確保型からサーバーレスへ 〜サーバーレスを理解する最初の一歩〜

- サーバーレスへの期待は高まっている
    - 従来のシステムに対する課題は薄々認識していたが、コロナを含む世界情勢の変化で対応が急務に
- そもそもサーバーレスってなによ
    - サーバーレスは利用する人が**サーバーの存在を意識せず**開発ができるということ
- マネージド/サーバーレス
  - ある程度の型に従うことで、維持管理をクラウドに移譲できるので、維持管理費がめっちゃ減る
  - 型が前提となるので、新規プロダクトなどで利用するのがよい
  - サーバーが実行する環境はクラウド側が全て管理する
  - **課金も利用した分だけ**
- AWSでサーバーレスを利用するパターン
  - API Gateway
    - REST API
    - URLごとに呼び出す関数を変更することができる
  - Lambda
    - 実処理
  - DynamoDB
    - データ永続化
- サーバーレス型のいいところ
  - トライアンドエラーができる
    - 費用が使った分だけ
    - 構築の手間がない
- **サーバーレスはパターンの組み合わせでアプリケーションを作る**
    - https://aws.amazon.com/jp/serverless/patterns/serverless-pattern/

# フロントエンドエンジニアのための AWS 入門 〜バックエンド学習の Learning path〜
- Webアプリケーションの課題
  - PoCのためにバックエンドを含めてプロトタイプを高速に開発したい
  - データを確認できるダッシュボードが必要
  - 高速にデプロイしたい

いきなり一つのところを深掘りすると消化不良になりがち -> 広く浅く知ることから始めると良い

- マンガ/グラレコ
  - https://aws.amazon.com/jp/campaigns/manga/series/
  - https://aws.amazon.com/jp/builders-flash/202105/awsgeek-sqs/?awsf.filter-name=*all

- リソースの定義
  - AWS Amplify
    - コマンドを実行するだけでリソースを定義できる、フルスタックWebアプリケーション
    - 裏側はFargate
  - AWS CDK
    - スクリプトを通じて開発リソースの作成ができるツール
    - インフラの**あるべき姿**を定義しておく
    - 裏側はFargate
